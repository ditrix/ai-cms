# Задача 2.1: Расширение модели User

## Ответственный агент
**dev_agent_1**

## Этап
Этап 2: Модели и отношения

## Зависимости
- Задача 1.1 (Enum для ролей) - должна быть завершена
- Задача 1.2 (Миграция users) - должна быть завершена

## Описание
Расширить модель `User` для поддержки ролей и отношений с клиентами.

## Файлы для изменения
- `app/Models/User.php` (изменить существующий файл)

## Требования
1. Добавить использование `UserRole` enum
2. Добавить методы проверки роли:
   - `isManager(): bool`
   - `isSuperManager(): bool`
   - `isAdmin(): bool`
3. Добавить отношения:
   - `clients()` - hasMany (клиенты, созданные пользователем)
   - `managedClients()` - hasMany (клиенты, назначенные менеджеру через manager_id)
4. Добавить casts для `role` (UserRole enum) и `is_active` (boolean)

## Ссылки на документацию
- См. `PLAN.mdc` - Задача 2.1
- См. `ARC.mdc` - раздел 3.6 (User Model)
- Использовать `search-docs` для Laravel Eloquent relationships

## Критерии приемки
- [ ] Модель использует `UserRole` enum
- [ ] Реализованы все три метода проверки роли
- [ ] Реализованы оба отношения (clients, managedClients)
- [ ] Добавлены casts для role и is_active
- [ ] Код соответствует стандартам Laravel (проверить через `vendor/bin/pint`)
- [ ] Задача задокументирована в `workflow.mdc`

## Примечания
Можно выполнять параллельно с задачей 2.2
