# Задача 3.1: Policy для Client

## Ответственный агент
**dev_agent_1**

## Этап
Этап 3: Авторизация и политики

## Зависимости
- Задача 2.1 (Расширение User) - должна быть завершена
- Задача 2.2 (Модель Client) - должна быть завершена

## Описание
Создать Policy для авторизации операций с клиентами на основе ролей пользователей.

## Файлы для создания
- `app/Policies/ClientPolicy.php` (новый файл)

## Требования
Реализовать методы авторизации:
- `viewAny(User $user)`: 
  - Менеджер видит только своих клиентов (где manager_id = user.id)
  - Супер-менеджер и админ видят всех клиентов
- `view(User $user, Client $client)`:
  - Менеджер только своих клиентов
  - Супер-менеджер и админ - всех
- `create(User $user)`:
  - Менеджер может создавать клиентов (они автоматически привязываются к нему)
  - Супер-менеджер и админ могут создавать клиентов
- `update(User $user, Client $client)`:
  - Менеджер только своих клиентов
  - Супер-менеджер и админ - всех
- `delete(User $user, Client $client)`:
  - Менеджер только своих клиентов
  - Супер-менеджер и админ - всех

## Ссылки на документацию
- См. `PLAN.mdc` - Задача 3.1
- См. `ARC.mdc` - раздел 3.5 (ClientPolicy)
- Использовать `search-docs` для Laravel Policies

## Критерии приемки
- [ ] Файл `app/Policies/ClientPolicy.php` создан
- [ ] Реализованы все методы авторизации
- [ ] Логика доступа соответствует требованиям PRD
- [ ] Policy зарегистрирована в `app/Providers/AuthServiceProvider.php` или через автодискавери
- [ ] Код соответствует стандартам Laravel
- [ ] Задача задокументирована в `workflow.mdc`

## Примечания
Можно выполнять параллельно с задачей 3.2
