# Задача 11.1: Тесты для ClientController

## Ответственный агент
**qa_agent**

## Этап
Этап 11: Тестирование

## Зависимости
- Задача 5.1 (ClientController) - должна быть завершена

## Описание
Создать feature тесты для ClientController с проверкой прав доступа для разных ролей.

## Файлы для создания
- `tests/Feature/ClientControllerTest.php` (новый файл)

## Требования

### Тестовые сценарии:
1. **Менеджер:**
   - Может просматривать только своих клиентов
   - Может создавать клиентов (они автоматически привязываются к нему)
   - Может обновлять только своих клиентов
   - Может удалять только своих клиентов
   - Не может просматривать/обновлять/удалять чужих клиентов

2. **Супер-менеджер:**
   - Может просматривать всех клиентов
   - Может создавать клиентов с указанием менеджера
   - Может обновлять всех клиентов
   - Может удалять всех клиентов
   - Может менять менеджера у клиента

3. **Администратор:**
   - Те же права, что и у супер-менеджера

4. **Общие тесты:**
   - Валидация данных при создании/обновлении
   - Поиск и сортировка работают корректно
   - Пагинация работает (если реализована)

### Использование:
- Pest PHP для написания тестов
- Factories для создания тестовых данных
- `actingAs()` для авторизации пользователей с разными ролями

## Ссылки на документацию
- См. `PLAN.mdc` - Задача 11.1
- См. `ARC.mdc` - раздел 8 (Тестирование)
- Использовать `search-docs` для Pest PHP и Laravel Testing

## Критерии приемки
- [ ] Файл `tests/Feature/ClientControllerTest.php` создан
- [ ] Реализованы тесты для всех ролей
- [ ] Тесты проверяют права доступа
- [ ] Тесты проверяют валидацию
- [ ] Тесты проверяют поиск и сортировку
- [ ] Все тесты проходят успешно (`php artisan test`)
- [ ] Код соответствует стандартам Pest PHP
- [ ] Задача задокументирована в `workflow.mdc`

## Примечания
Можно выполнять параллельно с задачей 11.2
